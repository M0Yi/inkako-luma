{% extends "layout/page.html" %}

{% block title %}定价方案 - Luma{% endblock %}

{% block content %}
<!-- Header Section -->
<section class="py-5 mt-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="container text-center text-white">
        <h1 class="display-4 fw-bold mb-3">简单透明的定价</h1>
        <p class="lead">选择最适合您的方案，随时可以升级或取消</p>

        <!-- Toggle Switch -->
        <div class="mt-4">
            <div class="form-check form-switch d-inline-block">
                <input class="form-check-input" type="checkbox" id="billingToggle">
                <label class="form-check-label text-white" for="billingToggle">
                    按年付费 <span class="badge bg-success ms-2">节省 20%</span>
                </label>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Cards -->
<section class="py-5">
    <div class="container">
        <div class="row g-4 justify-content-center">
            {% for plan in plans %}
            <div class="col-lg-4">
                <div class="card border-0 shadow-lg h-100 {% if plan.highlight %}border-primary pricing-featured{% endif %}">
                    {% if plan.highlight %}
                    <div class="card-header bg-primary text-white text-center border-0 py-3">
                        <h6 class="mb-0"><i class="fas fa-star me-2"></i>最受欢迎</h6>
                    </div>
                    {% endif %}

                    <div class="card-body text-center p-5">
                        <h3 class="card-title">{{ plan.name }}</h3>
                        <div class="pricing-amount my-4">
                            <span class="h1 fw-bold">
                                {% if plan.price == 0 %}
                                    免费
                                {% else %}
                                    ¥{{ plan.price }}
                                {% endif %}
                            </span>
                            {% if plan.price > 0 %}
                                <span class="text-muted">/ {{ plan.period }}</span>
                            {% endif %}
                        </div>
                        <p class="text-muted mb-4">{{ plan.description }}</p>

                        <ul class="list-unstyled text-start mb-4">
                            {% for feature in plan.features %}
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                {{ feature }}
                            </li>
                            {% endfor %}
                        </ul>

                        <a href="#" class="btn {{ plan.button_class }} btn-lg w-100">
                            {{ plan.button_text }}
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Additional Info -->
        <div class="row mt-5">
            <div class="col-lg-8 mx-auto text-center">
                <p class="text-muted">
                    所有方案都包含 SSL 加密、数据备份和基础技术支持。
                    <a href="/help" class="text-primary">了解更多</a>
                </p>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h2 class="text-center mb-5">常见问题</h2>

                <div class="accordion" id="pricingFAQ">
                    <div class="accordion-item border-0 shadow-sm mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                可以随时升级或降级我的方案吗？
                            </button>
                        </h2>
                        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#pricingFAQ">
                            <div class="accordion-body">
                                当然可以！您可以随时在账户设置中升级或降级您的方案。升级立即生效，降级将在下个计费周期生效。
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item border-0 shadow-sm mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                免费版有什么限制？
                            </button>
                        </h2>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                            <div class="accordion-body">
                                免费版限制最多 50 人参加活动，提供基础功能。如果您需要更多参与者或高级功能，建议升级到专业版。
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item border-0 shadow-sm mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                支持哪些支付方式？
                            </button>
                        </h2>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                            <div class="accordion-body">
                                我们支持微信支付、支付宝、银行卡等多种支付方式。企业用户还可以申请发票和对公转账。
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item border-0 shadow-sm mb-3">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                有退款保障吗？
                            </button>
                        </h2>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                            <div class="accordion-body">
                                我们提供 30 天无理由退款保障。如果您对服务不满意，可以在 30 天内申请全额退款。
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5" style="background: var(--luma-dark);">
    <div class="container text-center text-white">
        <h2 class="mb-3">还有疑问？</h2>
        <p class="lead mb-4">我们的销售团队随时为您解答</p>
        <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
            <a href="/contact" class="btn btn-primary btn-lg">
                <i class="fas fa-phone me-2"></i>
                联系销售
            </a>
            <a href="/demo" class="btn btn-outline-light btn-lg">
                <i class="fas fa-play me-2"></i>
                预约演示
            </a>
        </div>
    </div>
</section>
{% endblock %}

{% block styles %}
.pricing-featured {
    transform: scale(1.05);
    border: 2px solid var(--luma-primary) !important;
}

.pricing-featured .card-body {
    position: relative;
}

@media (max-width: 768px) {
    .pricing-featured {
        transform: none;
    }
}
{% endblock %}

{% block scripts %}
<script>
document.getElementById('billingToggle').addEventListener('change', function() {
    // 这里可以添加年付/月付切换的逻辑
    console.log('Billing toggle changed:', this.checked);
});
</script>
{% endblock %}
